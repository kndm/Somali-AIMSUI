<div class="container-fluid view-area">
  <block-ui>
    <div class="row">
      <div class="col-md-12">
        <ul class="nav nav-tabs">
          <li class="nav-item">
            <a class="nav-link active btn-info" data-toggle="tab">Contact us</a>
          </li>
        </ul>
      </div>
      <div class="col-sm-9 col-md-7 col-lg-5 mx-auto">
        <div class="card card-signin my-5">
          <div class="card-body">
            <div *ngIf="isError" class="alert alert-danger alert-dismissible">
              <button type="button" class="close" data-dismiss="alert">&times;</button>
              <strong>Error!</strong> {{errorMessage}}
            </div>
            <div *ngIf="isSuccess" class="alert alert-success alert-dismissible">
              <button type="button" class="close" data-dismiss="alert">&times;</button>
              <strong>Information!</strong> {{successMessage}}
            </div>
            <h5 class="card-title text-center">Contact us</h5>

            <form class="form-signin" (ngSubmit)="contactForm.form.valid && sendEmailRequest(contactForm)"
              #contactForm="ngForm">

              <div class="form-group">
                <label for="senderName">Your name</label>
                <input type="text" class="form-control" id="senderName" [(ngModel)]="model.senderName" name="senderName"
                  #senderName="ngModel" maxlength="30" required>
                <div *ngIf="contactForm.submitted" [hidden]="senderName.valid" class="alert alert-danger">
                  Name is required
                </div>
              </div>

              <div *ngIf="!isLoggedIn" class="form-group">
                <label for="senderEmail">Email</label>
                <input type="email" class="form-control" id="senderEmail" [(ngModel)]="model.senderEmail"
                  name="senderEmail" #senderEmail="ngModel" maxlength="255" required>
                <div *ngIf="contactForm.submitted" [hidden]="senderEmail.valid" class="alert alert-danger">
                  Email is required
                </div>
              </div>

              <div class="form-group">
                <label for="emailType">Request type</label>
                <select class="form-control" id="emailType" [(ngModel)]="model.emailType" name="emailType"
                  #emailType="ngModel" required>
                  <option value="null">-- Request type --</option>
                  <option *ngFor="let type of emailTypes" value="{{type.val}}">
                    {{type.text}}
                  </option>
                </select>
              </div>

              <div class="form-group">
                <label for="subject">Subject</label>
                <input type="text" class="form-control" id="subject" [(ngModel)]="subject" name="subject"
                  #subject="ngModel" maxlength="50" required>
                <div *ngIf="contactForm.submitted" [hidden]="subject.valid" class="alert alert-danger">
                </div>

                <div class="form-group">
                  <label>Message</label>
                  <textarea rows="5" class="form-control" id="message" [(ngModel)]="model.message" name="message"
                    #message="ngModel" maxlength="500" required></textarea>
                  <div *ngIf="contactForm.submitted" [hidden]="message.valid" class="alert alert-danger">
                    Message is required
                  </div>
                </div>

                <button class="btn btn-lg btn-info btn-block text-uppercase" type="submit">Send request</button>
            </form>
          </div>
        </div>
      </div>
    </div>

  </block-ui>
</div>

<error-modal message={{errorMessage}}></error-modal>