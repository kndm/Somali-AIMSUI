<div class="container-fluid view-area">
  <div class="row">
    <div class="col-md-12">
      <ul class="nav nav-tabs">
        <li class="nav-item">
          <a class="nav-link active btn-info" data-toggle="tab">Merge Projects</a>
        </li>
      </ul>
    </div>
  </div>

  <div class="row">

    <div class="col-md-12 margin-top-10">
      <div class="float-right">
        <table>
          <tr>
            <td>
                <button [class.disable]='isSearchingProjects' class="btn btn-info btn-lg float-right"
                (click)="proceedConfirmation()">Proceed with Merge</button>
            </td>
          </tr>
        </table>
      </div>
    </div>
  </div>

  <div class="row">
    <!--IATI Activity Box-->
    <div class="col-md-6">

      <div class="col-md-12 col-sm-12">
        <div class="card card-signin my-5">
          <div class="card-body iati-box">
            <h5 class="card-title text-center">Source projects</h5>
            <table class="table table-bordered">
              <tr *ngIf="isAimsLoading">
                <span class="text-info">Wait loading aims data...</span>
              </tr>
              <tr *ngFor="let project of aimsProjects">
                <td>
                  <span class="float-left">
                    <b>Project Title: </b>{{project.title | truncate}} <a href="#" title="View Project Details"
                      id="aproject-{{project.id}}" (click)="viewAIMSProject($event)" class="text-info">View
                      Details</a><br />
                    <b>Start Date: </b>{{project.startDate}}<br />
                    <span class="badge badge-warning">AIMS</span>
                  </span>
                  <span class="float-right">
                    <button id="aimst-{{project.id}}" class="btn btn-primary btn-sm"
                      (click)="viewProjectAIMS($event)">View detail</button>
                    &nbsp;
                    <button id="aimsd-{{project.id}}" class="btn btn-success btn-sm"
                      (click)="mergeProject($event)">Merge
                      >></button>
                  </span>
                </td>
              </tr>

              <tr *ngIf="isIatiLoading">
                <span class="text-info">Wait loading iati data...</span>
              </tr>
              <tr *ngFor="let project of iatiProjects">
                <td>
                  <span class="float-left">
                    <b>Project Title: </b>{{project.title | truncate}} <a href="#" title="View Project Details"
                      id="iproject-{{project.id}}" (click)="viewIATIProject($event)" class="text-info">View
                      Details</a><br />
                    <b>Currency: </b>{{project.defaultCurrency}}<br />
                    <span class="badge badge-warning">IATI</span>
                  </span>
                  <span class="float-right">
                    <button id="iatit-{{project.id}}" class="btn btn-success btn-sm"
                      (click)="viewProjectIATI($event)">View detail</button>
                  </span>
                </td>
              </tr>

            </table>
          </div>
        </div>
      </div>

    </div>

    <!--Selected projects box-->
    <div class="col-md-6 col-sm-12">
      <div class="card card-signin my-5">
        <div class="card-body iati-box">
          <h5 class="card-title text-center">Selected Projects</h5>
          <div>
            <table class="table table-bordered">
              <tr *ngFor="let project of selectedProjects">
                <td>
                  <span class="float-left">
                    <b>Title: </b>{{project.title}}<br />
                  </span>
                  <span class="float-right">
                    <button type="button" id="selected-{{project.id}}" class="btn btn-info btn-sm"
                      (click)="showSelectedProjectDescription($event)">Description</button>
                    &nbsp;
                    <button type="button" id="{{project.id}}" class="btn btn-success btn-sm"
                      (click)="removeSelectedProject($event)">De-Select</button>
                  </span>
                </td>
              </tr>
            </table>
          </div>
        </div>
      </div>
    </div>

  </div>
  <!--End of Boxes row-->

</div>

<error-modal message={{errorMessage}}></error-modal>

<jw-modal id="project-description">
  <div class="row">
    <div class="col-md-12">
      <div class="card card-signin my-5">
        <div class="card-body">
          <h5 class="card-title text-center">Project Description</h5>
          <div>
            {{selectedProjectDescription}}
          </div>
        </div>
      </div>
      <span class="float-right">
        <button class="btn btn-danger" (click)="closeModal('project-description');">Close</button>
      </span>
    </div>
  </div>
</jw-modal>

<jw-modal id="confirmation-modal">
  <div class="row">
    <div class="col-md-12">
      <div class="card">
        <div class="card-header bg-info text-white">Confirmation Message</div>
        <div class="card-body text-info">
          You have not selected any of the projects. Are you sure you want to proceed?
        </div>
      </div><br />
      <button class="btn btn-info" (click)="proceedToDataEntry();">Yes Proceed</button>
      &nbsp;
      <button class="btn btn-danger" (click)="closeConfirmationModal();">No</button>
    </div>
  </div>
</jw-modal>