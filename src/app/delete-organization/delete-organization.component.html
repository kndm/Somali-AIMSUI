<div class="container-fluid view-area">

  <block-ui>
    <div class="row">
      <div class="col-md-12">
        <ul class="nav nav-tabs">
          <li class="nav-item">
            <a class="nav-link active btn-info" data-toggle="tab">Delete/Re-assing organization</a>
          </li>
          <li class="nav-item">
            <a class="nav-link text-info" data-toggle="tab" [routerLink]="['/organizations']">Organizations list</a>
          </li>
        </ul>
      </div>
    </div>

    <div class="row">
      <!--IATI Activity Box-->
      <div class="col-md-6 col-sm-6">
        <div class="card card-signin my-5">
          <div class="card-body iati-box">
            <h5 class="card-title text-center">Organizations listing</h5>
            <div *ngIf="isLoading">
              Loading organizations...
            </div>
            <table *ngIf="filteredOrganizationsList.length > 0" class="table table-bordered">
              <tr *ngFor="let organization of filteredOrganizationsList">
                <td>
                  <span class="float-left">
                    {{organization.organizationName}}
                  </span>
                  <span class="float-right margin-right-15">
                    <button type="button" id="select-{{organization.id}}" class="btn btn-success btn-sm"
                      (click)="selectOrganization($event)">Select >></button>
                  </span>
                </td>
              </tr>
            </table>
            <span *ngIf="filteredOrganizationsList.length == 0" class="text-info">
              No organizations to show
            </span>
          </div>
        </div>
      </div>

      <!--Organizations box from AIMS-->
      <div class="col-md-6 col-sm-6">
        <div class="card card-signin my-5">
          <div class="card-body iati-box">
            <form class="form-signin" (ngSubmit)="organizationForm.form.valid && mergeAndSaveProject()"
              #organizationForm="ngForm">
              <div class="form-group">
                <label for="name">New name for merge</label>
                <input type="text" placeholder="Enter new name for merged organizations" class="form-control" id="name" maxlength="200" [(ngModel)]="model.name" name="name"
                  #title="ngModel" required>
                <div *ngIf="organizationForm.submitted" [hidden]="name.valid" class="alert alert-danger">
                  New name for merge is required
                </div>
              </div>

            </form>

            <h5 class="card-title text-center">Delete confirmation</h5>
            <form class="form-signin" (ngSubmit)="projectForm.form.valid && mergeAndSaveProject()"
              #projectForm="ngForm">
            <div class="form-group">
              <label for="organization">New organization for mapping</label>
              <select class="form-control" id="organizationId" [(ngModel)]="model.organizationId" name="organizationId"
                  #organizationId="ngModel" required>
                  <option *ngFor="let organization of organizationsList" [value]="organization.id">{{organization.organizationName}}
                  </option>
                </select>
              <div *ngIf="projectForm.submitted" [hidden]="title.valid" class="alert alert-danger">
                Project title is required
              </div>
            </div>
            <div class="form-group">
              <p class="text-info">
                You can assign the new organization to effected project/s. If you do not assign the project
                and delete without assign, the select organization will be deleted for all the effected projects.
                Please review the settings before delete, as this action cannot be undone.
              </p>
            </div>

            <button class="btn btn-lg btn-danger btn-block text-uppercase"
                type="submit">Delete Now</button>
            </form>
          </div>
        </div>
      </div>

    </div>

    </block-ui>
  </div>
