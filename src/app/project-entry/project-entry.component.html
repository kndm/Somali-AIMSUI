<div class="container-fluid view-area">

  <block-ui>
    <div class="row">

      <div class="col-md-12">
        <ul class="nav nav-tabs">
          <li class="nav-item">
            <a class="nav-link text-info" data-toggle="tab" [routerLink]="['/new-project']">New Project Selection</a>
          </li>
          <li class="nav-item">
            <a [ngClass]="{'btn-info': currentTab == 'project', 'text-info': currentTab != 'project'}" href="#" class="nav-link text-info"
              (click)="showProjects()" data-toggle="tab">Name/Description</a>
          </li>
          <li class="nav-item">
            <a [ngClass]="{'btn-info': currentTab == 'funder', 'text-info': currentTab != 'funder'}" href="#" class="nav-link text-info"
              (click)="showFunders()" data-toggle="tab">Funders/Financing</a>
          </li>
          <li class="nav-item">
            <a [ngClass]="{'btn-info': currentTab == 'implementer', 'text-info': currentTab != 'implementer'}" href="#"
              class="nav-link text-info" (click)="showImplementers()" data-toggle="tab">Implementers</a>
          </li>
          <li class="nav-item">
            <a [ngClass]="{'btn-info': currentTab == 'sector', 'text-info': currentTab != 'sector'}" href="#" class="nav-link text-info"
              (click)="showSectors()" data-toggle="tab">Sectors</a>
          </li>
          <li class="nav-item">
            <a [ngClass]="{'btn-info': currentTab == 'location', 'text-info': currentTab != 'location'}" href="#" class="nav-link text-info"
              (click)="showLocations()" data-toggle="tab">Locations</a>
          </li>
          <li class="nav-item">
            <a [ngClass]="{'btn-info': currentTab == 'document', 'text-info': currentTab != 'document'}" href="#" class="nav-link text-info"
              (click)="showDocuments()" data-toggle="tab">Documents</a>
          </li>
          <li class="nav-item">
            <a [ngClass]="{'btn-info': currentTab == 'disbursement', 'text-info': currentTab != 'disbursement'}" href="#" class="nav-link text-info"
              (click)="showDisbursements()" data-toggle="tab">Disbursements</a>
          </li>
          <li class="nav-item">
            <a [ngClass]="{'btn-info': currentTab == 'custom', 'text-info': currentTab != 'custom'}" href="#" class="nav-link text-info"
              (click)="showCustomFields()" data-toggle="tab">Custom Fields</a>
          </li>
        </ul>
      </div>
    </div>

    <div class="row text-center">
      <div *ngIf="isError" class="alert alert-danger alert-dismissible">
        <button type="button" class="close" data-dismiss="alert">&times;</button>
        <strong>Error!</strong> {{errorMessage}}
      </div>
    </div>

    <div class="row text-center">
      <div *ngIf="showMessage" class="alert alert-info alert-dismissible">
        <button type="button" class="close" data-dismiss="alert">&times;</button>
        <strong>Information!</strong> {{infoMessage}}
      </div>
    </div>

    <!--Data entry tab for projects-->
    <div *ngIf="currentTab == 'project'" class="row">

      <div class="col-md-6">

        <div class="col-md-12 col-sm-12">
          <div class="card card-signin my-5">
            <div class="card-body iati-box">
              <h6 class="card-title text-center">Selected Projects</h6>
              <table class="table table-bordered">
                <tr *ngIf="isAimsLoading">
                  <span class="text-info">Wait loading aims data...</span>
                </tr>
                <tr *ngFor="let project of aimsProjects">
                  <td>
                    <span class="float-left">
                      <b>Project Title: </b>{{project.title | truncate}} <a href="#" title="View Project Details" id="aproject-{{project.id}}"
                        (click)="viewAIMSProject($event)" class="text-info">View Details</a><br />
                      <b>Start Date: </b>{{project.startDate}}<br />
                      <span class="badge badge-warning">AIMS</span>
                    </span>
                    <span class="float-right">
                      <button id="aimst-{{project.id}}" class="btn btn-primary btn-sm" (click)="enterProjectTitleAIMS($event)">Title
                        >></button>
                      &nbsp;
                      <button id="aimsd-{{project.id}}" class="btn btn-success btn-sm" (click)="enterProjectDescAIMS($event)">Description
                        >></button>
                    </span>
                  </td>
                </tr>

                <tr *ngIf="isIatiLoading">
                  <span class="text-info">Wait loading iati data...</span>
                </tr>
                <tr *ngFor="let project of iatiProjects">
                  <td>
                    <span class="float-left">
                      <b>Project Title: </b>{{project.title | truncate}} <a href="#" title="View Project Details" id="iproject-{{project.id}}"
                        (click)="viewIATIProject($event)" class="text-info">View Details</a><br />
                      <b>Currency: </b>{{project.defaultCurrency}}<br />
                      <span class="badge badge-warning">IATI</span>
                    </span>
                    <span class="float-right">
                      <button id="iatit-{{project.id}}" class="btn btn-primary btn-sm" (click)="enterProjectTitleIATI($event)">Title
                        >></button>
                      &nbsp;
                      <button id="iatid-{{project.id}}" class="btn btn-success btn-sm" (click)="enterProjectDescIATI($event)">Description
                        >></button>
                    </span>
                  </td>
                </tr>

              </table>
            </div>
          </div>
        </div>

      </div>

      <div class="col-md-6">
        <!--Data entry box-->
        <div class="col-md-12 col-sm-12">
          <div class="card card-signin my-5">
            <div class="card-body">
              <h6 class="card-title text-center">New Project</h6>

              <form class="form-signin" (ngSubmit)="saveProject()" #projectForm="ngForm">
                <div class="form-group">
                  <label for="title">Project Title</label>
                  <input type="text" class="form-control" id="title" maxlength="1000" [(ngModel)]="model.title" name="title"
                    #title="ngModel" required>
                  <div [hidden]="title.valid" class="alert alert-danger">
                    Project Title is required
                  </div>
                </div>
                <div class="form-group">
                  <label for="title">Start Date</label>
                  <div class="input-group">
                    <input class="form-control" placeholder="yyyy-mm-dd" type="date" name="startDate" [(ngModel)]="model.startDate"
                      ngbDatepicker #s="ngbDatepicker" required>
                    <div class="input-group-append">
                      <button class="btn btn-outline-secondary calendar" (click)="s.toggle()" type="button"></button>
                    </div>
                  </div>
                </div>

                <div class="form-group">
                  <label for="title">End Date</label>
                  <div class="input-group">
                    <input class="form-control" placeholder="yyyy-mm-dd" type="date" name="endDate" [(ngModel)]="model.endDate"
                      ngbDatepicker #e="ngbDatepicker" required>
                    <div class="input-group-append">
                      <button class="btn btn-outline-secondary calendar" (click)="e.toggle()" type="button"></button>
                    </div>
                  </div>
                </div>

                <div class="form-group">
                  <label for="title">Description</label>
                  <textarea class="form-control" id="description" [(ngModel)]="model.description" name="description"
                    #description="ngModel" rows="7" maxlength="10000">
                      </textarea>
                </div>
                <button [class.disable]="isProjectBtnDisabled" class="btn btn-lg btn-info btn-block text-uppercase"
                  type="submit">{{btnProjectText}}</button>
              </form>

            </div>
          </div>
        </div>

      </div>

    </div>
    <!--End of data entry tab-->

    <!--Sectors tab for projects-->
    <div *ngIf="currentTab == 'sector'" class="row">

      <div class="col-md-6 col-sm-6">

        <div class="col-md-12">
          <div class="card card-signin my-5">
            <div class="card-body">
              <h5 class="card-title text-center">Sectors from AIMS</h5>
              <table class="table table-bordered">
                <tr *ngFor="let project of aimsProjects">
                  <td>
                    <b>Project Title: </b>{{project.title | truncate}} <a href="#" title="View Project Details" id="aproject-{{project.id}}"
                        (click)="viewAIMSProject($event)" class="text-info">View Details</a><br />
                      <span class="badge badge-warning">AIMS</span>
                    <table *ngIf="project.sectors.length > 0" class="table table-bordered">
                      <tr>
                        <th>Sector</th>
                        <th>Funds %</th>
                        <th>Action</th>
                      </tr>
                      <tr *ngFor="let sector of project.sectors">
                        <td>
                          {{sector.sectorName}}
                        </td>
                        <td>
                          {{sector.fundsPercentage}}
                        </td>
                        <td>
                          <button id="asector-{{project.id}}-{{sector.id}}" (click)="enterAIMSSector($event)" class="btn btn-success btn-sm">Enter >></button>
                        </td>
                      </tr>
                    </table>
                    <div class="text-info" *ngIf="project.sectors.length == 0"><i>No sectors available</i></div>
                  </td>
                </tr>
              </table>

              <table *ngIf="iatiProjects.length > 0" class="table table-bordered">
                <tr *ngFor="let project of iatiProjects">
                  <td>
                    <b>Project Title: </b>{{project.title | truncate}} <a href="#" title="View Project Details" id="iproject-{{project.id}}"
                        (click)="viewIATIProject($event)" class="text-info">View Details</a><br />
                      <span class="badge badge-warning">IATI</span>
                    <table *ngIf="project.sectors.length > 0" class="table table-bordered">
                      <tr>
                        <th>Sector</th>
                        <th>Funds %</th>
                        <th>Action</th>
                      </tr>
                      <tr *ngFor="let sector of project.sectors">
                        <td>
                          {{sector.sectorName}}
                        </td>
                        <td>
                          {{sector.fundsPercentage}}
                        </td>
                        <td>
                          <button id="isector-{{project.id}}-{{sector.code}}" (click)="enterIATISector($event)" class="btn btn-success btn-sm">Enter >></button>
                        </td>
                      </tr>
                    </table>
                    <div class="text-info" *ngIf="project.sectors.length == 0"><i>No sectors available</i></div>
                  </td>
                </tr>
              </table>

            </div>
          </div>
        </div>

      </div>

      <!--Selected Sectors List-->
      <div class="col-md-6 col-sm-6">

        <div class="card card-signin my-5">
          <div class="card-body">
            <h5 class="card-title text-center">Manage Sectors</h5>
            <form *ngIf="sectorsList.length > 0" class="form-signin" [formGroup]='sectorSelectionForm'>
              <mat-form-field class="example-full-width">
                <input matInput placeholder="{{sectorPlaceHolder}}" aria-label="Sector Name" [matAutocomplete]="auto"
                  [formControl]="sectorInput">
                <mat-autocomplete #auto="matAutocomplete" [displayWith]="displaySectorFn.bind(this)">
                  <mat-option *ngFor="let sector of sectorsList" [value]="sector">
                    <span>{{sector.sectorName}}</span>
                  </mat-option>
                </mat-autocomplete>
              </mat-form-field>
            </form>

            <form class="form-signin" (ngSubmit)="saveProjectSector()" #projectSectorForm="ngForm">

              <div *ngIf="isSectorVisible" class="form-group">
                <label for="sectorName">New Sector</label>
                <input type="text" class="form-control" id="sectorName" [(ngModel)]="sectorModel.sectorName" name="sectorName"
                  #sectorName="ngModel" required>
                <div [hidden]="sectorName.valid" class="alert alert-danger">
                  Sector name is required
                </div>
              </div>

              <div class="form-group">
                <label for="fundsPercentage">Funds Perdentage</label>
                <input type="text" class="form-control" id="fundsPercentage" [(ngModel)]="sectorModel.fundsPercentage"
                  name="fundsPercentage" #fundsPercentage="ngModel" required>
                <div [hidden]="fundsPercentage.valid" class="alert alert-danger">
                  Funds percentage is required
                </div>
              </div>
              
              <button [class.disable]="isProjectSectorBtnDisabled" class="btn btn-lg btn-info btn-block text-uppercase"
                type="submit">{{btnProjectSectorText}}</button>
            </form>

          </div>
        </div>

        <div class="card card-signin">
          <div class="card-body iati-box">
            <h5 class="card-title text-center">Project Sectors</h5>
            <table class="table table-bordered">
              <tr>
                <th>Sector</th>
                <th>Fund %</th>
                <th>Action</th>
              </tr>
              <tr *ngFor="let sector of currentProjectSectorsList">
                <td>{{sector.sector}}</td>
                <td>{{sector.fundsPercentage}}</td>
                <td>
                  <button id="dsec-{{activeProjectId}}-{{sector.sectorId}}" (click)="deleteProjectSector($event)" class="btn btn-danger btn-sm">
                    <i id="idsec-{{activeProjectId}}-{{sector.sectorId}}" class="fa fa-trash"></i>
                  </button>
                </td>
              </tr>
            </table>
          </div>
        </div>

      </div>

    </div>
    <!--End of data entry tab-->
    <!--End of Sectors Tab-->

    <!--Locations tab for projects-->
    <div *ngIf="currentTab == 'location'" class="row">

      <div class="col-md-6 col-sm-6">

        <div class="col-md-12">
          <div class="card card-signin my-5">
            <div class="card-body">
              <h5 class="card-title text-center">Locations List</h5>
              <table class="table table-bordered">
                <tr *ngFor="let project of aimsProjects">
                  <td>
                    <b>Project Title: </b>{{project.title | truncate}} <a href="#" title="View Project Details" id="aproject-{{project.id}}"
                        (click)="viewAIMSProject($event)" class="text-info">View Details</a><br />
                      <span class="badge badge-warning">AIMS</span>
                    <table *ngIf="project.locations.length > 0" class="table table-bordered">
                      <tr>
                        <th>Location</th>
                        <th>Action</th>
                      </tr>
                      <tr *ngFor="let location of project.locations">
                        <td>
                          {{location.location}}
                        </td>
                        <td>
                          <button id="alocation-{{project.id}}-{{location.id}}" (click)="enterAIMSLocation($event)"
                            class="btn btn-success btn-sm">Enter >></button>
                        </td>
                      </tr>
                    </table>
                    <div class="text-info" *ngIf="project.locations.length == 0"><i>No locations available</i></div>
                  </td>
                </tr>
              </table>

              <table *ngIf="iatiProjects.length > 0" class="table table-bordered">
                <tr *ngFor="let project of iatiProjects">
                  <td>
                    <b>Project Title: </b>{{project.title | truncate}} <a href="#" title="View Project Details" id="iproject-{{project.id}}"
                        (click)="viewIATIProject($event)" class="text-info">View Details</a><br />
                      <span class="badge badge-warning">IATI</span>
                    <table *ngIf="project.locations.length > 0" class="table table-bordered">
                      <tr>
                        <th>Location</th>
                        <th>Action</th>
                      </tr>
                      <tr *ngFor="let location of project.locations">
                        <td>
                          {{location.name}}
                        </td>
                        <td>
                          <button id="ilocation-{{project.id}}-{{location.name}}" (click)="enterIATILocation($event)"
                            class="btn btn-success btn-sm">Enter >></button>
                        </td>
                      </tr>
                    </table>
                    <div class="text-info" *ngIf="project.locations.length == 0"><i>No locations available</i></div>
                  </td>
                </tr>
              </table>
            </div>
          </div>
        </div>

      </div>

      <!--Selected Locations List-->
      <div class="col-md-6 col-sm-6">

        <div class="card card-signin my-5">
          <div class="card-body">
            <h5 class="card-title text-center">Manage Locations</h5>

            <form class="form-signin" (ngSubmit)="saveProjectLocation()" #projectLocationForm="ngForm">

              <div *ngIf="locationEntryType == 'aims'" class="form-group">
                <label for="locationId">AIMS Locations</label>
                <select class="form-control" id="locationId" [(ngModel)]="locationModel.locationId" name="locationId"
                  #locationId="ngModel" required>
                  <option *ngFor="let location of locationsList" [value]="location.id">{{location.location}}</option>
                </select>
                <div [hidden]="locationId.valid" class="alert alert-danger">
                  Location is required
                </div>
              </div>

              <div *ngIf="locationEntryType == 'iati'" class="form-group">
                <label for="location">New Location</label>
                <input type="text" class="form-control" id="location" [(ngModel)]="locationModel.location" name="location"
                  #location="ngModel" required>
                <div [hidden]="location.valid" class="alert alert-danger">
                  Location is required
                </div>
              </div>

              <div class="form-group">
                <label for="fundsPercentage">Funds Perdentage</label>
                <input type="text" class="form-control" id="fundsPercentage" [(ngModel)]="locationModel.fundsPercentage"
                  name="fundsPercentage" #fundsPercentage="ngModel" required>
                <div [hidden]="fundsPercentage.valid" class="alert alert-danger">
                  Funds percentage is required
                </div>
              </div>

              <button [class.disable]="isProjectLocationBtnDisabled" class="btn btn-lg btn-info btn-block text-uppercase"
                type="submit">{{btnProjectLocationText}}</button>
            </form>

          </div>
        </div>

        <div class="card card-signin">
          <div class="card-body iati-box">
            <h5 class="card-title text-center">Project Locations</h5>
            <table class="table table-bordered">
              <tr>
                <th>Location</th>
                <th>Fund %</th>
                <th>Action</th>
              </tr>
              <tr *ngFor="let location of currentProjectLocationsList">
                <td>{{location.location}}</td>
                <td>{{location.fundsPercentage}}</td>
                <td>
                  <button id="dloc-{{activeProjectId}}-{{location.id}}" (click)="deleteProjectLocation($event)" class="btn btn-danger btn-sm">
                    <i id="idloc-{{activeProjectId}}-{{location.id}}" class="fa fa-trash"></i>
                  </button>
                </td>
              </tr>
            </table>
          </div>
        </div>

      </div>

    </div>
    <!--End of data entry tab-->
    <!--End of Locations Tab-->

    <!--Documents tab for projects-->
    <div *ngIf="currentTab == 'document'" class="row">

      <div class="col-md-6 col-sm-6">

        <div class="col-md-12">
          <div class="card card-signin my-5">
            <div class="card-body">
              <h5 class="card-title text-center">Documents List</h5>
              <table class="table table-bordered">
                <tr *ngFor="let project of aimsProjects">
                  <td>
                    <b>Project Title: </b>{{project.title | truncate}} <a href="#" title="View Project Details" id="aproject-{{project.id}}"
                        (click)="viewAIMSProject($event)" class="text-info">View Details</a><br />
                      <span class="badge badge-warning">AIMS</span>
                    <table *ngIf="project.documents.length > 0" class="table table-bordered">
                      <tr>
                        <th>Document Title</th>
                        <th>Url</th>
                        <th>Action</th>
                      </tr>
                      <tr *ngFor="let document of project.documents">
                        <td>
                          {{document.documentTitle}}
                        </td>
                        <td>
                          {{document.documentUrl}}
                        </td>
                        <td>
                          <button id="aDocument-{{activeProjectId}}-{{document.id}}" (click)="enterAIMSDocument($event)"
                            class="btn btn-success btn-sm">Enter</button>
                        </td>
                      </tr>
                    </table>
                    <div class="text-info" *ngIf="project.documents.length == 0"><i>No documents available</i></div>
                  </td>
                </tr>
              </table>

              <table *ngIf="iatiProjects.length > 0" class="table table-bordered">
                <tr *ngFor="let project of iatiProjects">
                  <td>
                    <b>Project Title: </b>{{project.title | truncate}} <a href="#" title="View Project Details" id="iproject-{{project.id}}"
                        (click)="viewIATIProject($event)" class="text-info">View Details</a><br />
                      <span class="badge badge-warning">IATI</span>
                    <table *ngIf="project.documents.length > 0" class="table table-bordered">
                      <tr>
                        <th>Document Title</th>
                        <th>Document Url</th>
                        <th>Action</th>
                      </tr>
                      <tr *ngFor="let document of project.documents">
                        <td>
                          {{document.documentTitle}}
                        </td>
                        <td class="dont-break-out">
                          {{document.documentUrl}}
                        </td>
                        <td>
                          <button id="ddocument-{{document.id}}" (click)="enterIATIDocument($event)" class="btn btn-success btn-sm">Enter</button>
                        </td>
                      </tr>
                    </table>
                    <div class="text-info" *ngIf="project.documents.length == 0"><i>No documents available</i></div>
                  </td>
                </tr>
              </table>
            </div>
          </div>
        </div>

      </div>

      <!--Selected Documents List-->
      <div class="col-md-6 col-sm-6">

        <div class="card card-signin my-5">
          <div class="card-body">
            <h5 class="card-title text-center">Manage Documents</h5>
            <form class="form-signin" (ngSubmit)="saveProjectDocument()" #projectDocumentForm="ngForm">

              <div class="form-group">
                <label for="documentTitle">Document Title</label>
                <input type="text" class="form-control" id="documentTitle" [(ngModel)]="documentModel.documentTitle"
                  name="documentTitle" #documentTitle="ngModel" required>
                <div [hidden]="documentTitle.valid" class="alert alert-danger">
                  Document Title is required
                </div>
              </div>

              <div class="form-group">
                <label for="documentUrl">Document Url</label>
                <input type="text" class="form-control" id="documentUrl" [(ngModel)]="documentModel.documentUrl" name="documentUrl"
                  #documentUrl="ngModel" required>
                <div [hidden]="documentUrl.valid" class="alert alert-danger">
                  Document url is required
                </div>
              </div>

              <button [class.disable]="isProjectDocumentBtnDisabled" class="btn btn-lg btn-info btn-block text-uppercase"
                type="submit">Save Document</button>
            </form>

          </div>
        </div>

        <div class="card card-signin">
          <div class="card-body iati-box">
            <h5 class="card-title text-center">Project Documents</h5>
            <table class="table table-bordered">
              <tr>
                <th>Document Title</th>
                <th>Url</th>
                <th>Action</th>
              </tr>
              <tr *ngFor="let document of currentProjectDocumentsList">
                <td>{{document.documentTitle}}</td>
                <td>{{document.documentUrl}}</td>
                <td>
                  <button id="ddocument-{{activeProjectId}}-{{document.id}}" (click)="deleteProjectDocument($event)"
                    class="btn btn-danger btn-sm">
                    <i id="idocument-{{activeProjectId}}-{{document.id}}" class="fa fa-trash"></i>
                  </button>
                </td>
              </tr>
            </table>
          </div>
        </div>

      </div>

    </div>
    <!--End of data entry tab-->
    <!--End of Documents Tab-->

    <!--Funders tab for projects-->
    <div *ngIf="currentTab == 'funder'" class="row">

      <div class="col-md-6 col-sm-6">

        <div class="col-md-12">
          <div class="card card-signin my-5">
            <div class="card-body">
              <h5 class="card-title text-center">Funders from AIMS</h5>
              <table class="table table-bordered">
                <tr *ngFor="let project of aimsProjects">
                  <td>
                    <b>Project Title: </b>{{project.title | truncate}} <a href="#" title="View Project Details" id="aproject-{{project.id}}"
                      (click)="viewAIMSProject($event)" class="text-info">View Details</a><br />
                    <span class="badge badge-warning">AIMS</span>
                    <table *ngIf="project.funders.length > 0" class="table table-bordered">
                      <tr>
                        <th>Funder Name</th>
                        <th>Action</th>
                      </tr>
                      <tr *ngFor="let funder of project.funders">
                        <td>
                          {{funder.name}}
                        </td>
                        <td>
                          <button id="aFunder-{{activeProjectId}}-{{funder.id}}" (click)="enterAIMSFunder($event)"
                            class="btn btn-success btn-sm">Enter >></button>
                        </td>
                      </tr>
                    </table>
                    <div class="text-info" *ngIf="project.funders.length == 0"><i>No funders from AIMS found.</i></div>
                  </td>
                </tr>
              </table>

              <table *ngIf="iatiProjects.length > 0" class="table table-bordered">
                <tr *ngFor="let project of iatiProjects">
                  <td>
                    <b>Project Title: </b>{{project.title | truncate}} <a href="#" title="View Project Details" id="iproject-{{project.id}}"
                      (click)="viewIATIProject($event)" class="text-info">View Details</a><br />
                    <span class="badge badge-warning">IATI</span>
                    <table *ngIf="project.participatingOrganizations.length > 0" class="table table-bordered">
                      <tr>
                        <th>Funder Name</th>
                        <th>Action</th>
                      </tr>
                      <tr *ngFor="let funder of project.participatingOrganizations">
                        <td>
                          {{funder.name}}
                        </td>
                        <td>
                          <button id="dfunder-{{project.id}}-{{funder.id}}" (click)="enterIATIFunder($event)" class="btn btn-success btn-sm">Enter >></button>
                        </td>
                      </tr>
                    </table>
                    <div class="text-info" *ngIf="project.participatingOrganizations.length == 0"><i>No funders from IATI found.</i></div>
                  </td>
                </tr>
              </table>

            </div>
          </div>
        </div>

      </div>

      <!--Selected Funders List-->
      <div class="col-md-6 col-sm-6">

        <div class="card card-signin my-5">
          <div class="card-body">
            <h5 class="card-title text-center">Manage Funders</h5>
            <form class="form-signin" (ngSubmit)="saveProjectFunder()" #projectFunderForm="ngForm">

              <div *ngIf="funderEntryType == 'aims'" class="form-group">
                <label for="funderId">AIMS Funders</label>
                <select class="form-control" id="funderId" [(ngModel)]="funderModel.funderId" name="funderId" #funderId="ngModel"
                  required>
                  <option *ngFor="let funder of organizationsList" [value]="funder.id">{{funder.organizationName}}</option>
                </select>
                <div [hidden]="funderId.valid" class="alert alert-danger">
                  Funder is required
                </div>
              </div>

              <div *ngIf="funderEntryType == 'iati'" class="form-group">
                <label for="funder">New Funder</label>
                <input type="text" maxlength="200" class="form-control" id="funder" [(ngModel)]="funderModel.funder"
                  name="funder" readonly="readonly" #funder="ngModel" required>
                <div [hidden]="funder.valid" class="alert alert-danger">
                  Funder Name is required
                </div>
              </div>

              <div class="form-group">
                <label for="documentUrl">Amount</label>
                <input type="number" maxlength="10" class="form-control" id="amount" [(ngModel)]="funderModel.amount"
                  name="amount" #amount="ngModel" required>
                <div [hidden]="amount.valid" class="alert alert-danger">
                  Amount is required
                </div>
              </div>

              <div class="form-group">
                <label for="currency">Currency</label>
                <select class="form-control" id="currency" [(ngModel)]="funderModel.currency" name="currency" #currency="ngModel"
                  required>
                  <option *ngFor="let currency of currencyList" [value]="currency">{{currency}}</option>
                </select>
                <div [hidden]="currency.valid" class="alert alert-danger">
                  Currency is required
                </div>
              </div>

              <div class="form-group">
                <label for="exchangeRate">Exchange Rate</label>
                <input type="number" class="form-control" id="exchangeRate" [(ngModel)]="funderModel.exchangeRate" name="exchangeRate"
                  maxlength="9" #exchangeRate="ngModel" />
              </div>

              <button [class.disable]="isProjectFunderBtnDisabled" class="btn btn-lg btn-info btn-block text-uppercase"
                type="submit">Save Funder</button>
            </form>

          </div>
        </div>

        <div class="card card-signin">
          <div class="card-body iati-box">
            <h5 class="card-title text-center">Project Funders</h5>
            <table class="table table-bordered">
              <tr>
                <th>Funder</th>
                <th>Amount</th>
                <th>Currency</th>
                <th>ExchangeRate</th>
                <th>Action</th>
              </tr>
              <tr *ngFor="let funder of currentProjectFundersList">
                <td>{{funder.funder}}</td>
                <td>{{funder.amount}}</td>
                <td>{{funder.currency}}</td>
                <td>{{funder.exchangeRate}}</td>
                <td>
                  <button id="dfunder-{{activeProjectId}}-{{funder.funderId}}" (click)="deleteProjectFunder($event)"
                    class="btn btn-danger btn-sm">
                    <i id="ifunder-{{activeProjectId}}-{{funder.funderId}}" class="fa fa-trash"></i>
                  </button>
                </td>
              </tr>
            </table>
          </div>
        </div>

      </div>

    </div>
    <!--End of data entry tab-->
    <!--End of Funders Tab-->

    <!--Implementers tab for projects-->
    <div *ngIf="currentTab == 'implementer'" class="row">

      <div class="col-md-6 col-sm-6">

        <div class="col-md-12">
          <div class="card card-signin my-5">
            <div class="card-body">
              <h5 class="card-title text-center">Implementers List</h5>
              <table class="table table-bordered">
                <tr *ngFor="let project of aimsProjects">
                  <td>
                    <b>Project Title: </b>{{project.title | truncate}} <a href="#" title="View Project Details" id="aproject-{{project.id}}"
                      (click)="viewAIMSProject($event)" class="text-info">View Details</a><br />
                    <span class="badge badge-warning">AIMS</span>
                    <table *ngIf="project.implementers.length > 0" class="table table-bordered">
                      <tr>
                        <th>Implementer Name</th>
                        <th>Action</th>
                      </tr>
                      <tr *ngFor="let implementer of project.implementers">
                        <td>
                          {{implementer.name}}
                        </td>
                        <td>
                          <button id="aImplementer-{{activeProjectId}}-{{implementer.id}}" (click)="enterAIMSImplementer($event)"
                            class="btn btn-success btn-sm">Enter >></button>
                        </td>
                      </tr>
                    </table>
                    <div class="text-info" *ngIf="project.implementers.length == 0"><i>No implementers found.</i></div>
                  </td>
                </tr>
              </table>

              <table *ngIf="iatiProjects.length > 0" class="table table-bordered">
                <tr *ngFor="let project of iatiProjects">
                  <td>
                    <b>Project Title: </b>{{project.title | truncate}} <a href="#" title="View Project Details" id="iproject-{{project.id}}"
                      (click)="viewIATIProject($event)" class="text-info">View Details</a><br />
                    <span class="badge badge-warning">IATI</span>
                    <table *ngIf="project.participatingOrganizations.length > 0" class="table table-bordered">
                      <tr>
                        <th>Implementer Name</th>
                        <th>Action</th>
                      </tr>
                      <tr *ngFor="let implementer of project.participatingOrganizations">
                        <td>
                          {{implementer.name}}
                        </td>
                        <td>
                          <button id="dimplementer-{{project.id}}-{{implementer.id}}" (click)="enterIATIImplementer($event)"
                            class="btn btn-success btn-sm">Enter >></button>
                        </td>
                      </tr>
                    </table>
                    <div class="text-info" *ngIf="project.participatingOrganizations.length == 0"><i>No implementers found.</i></div>
                  </td>
                </tr>
              </table>

            </div>
          </div>
        </div>

      </div>

      <!--Selected Implementers List-->
      <div class="col-md-6 col-sm-6">

        <div class="card card-signin my-5">
          <div class="card-body">
            <h6 class="card-title text-center">Manage Implementers</h6>
            <form class="form-signin" (ngSubmit)="saveProjectImplementer()" #projectImplementerForm="ngForm">

              <div *ngIf="implementerEntryType == 'aims'" class="form-group">
                <label for="implementerId">AIMS Implementers</label>
                <select class="form-control" id="implementerId" [(ngModel)]="implementerModel.implementerId" name="implementerId"
                  #implementerId="ngModel" required>
                  <option *ngFor="let implementer of organizationsList" [value]="implementer.id">{{implementer.organizationName}}</option>
                </select>
                <div [hidden]="implementerId.valid" class="alert alert-danger">
                  Implementer is required
                </div>
              </div>

              <div *ngIf="implementerEntryType == 'iati'" class="form-group">
                <label for="implementer">New Implementer</label>
                <input type="text" maxlength="200" class="form-control" id="implementer" [(ngModel)]="implementerModel.implementer"
                  name="implementer" readonly="readonly" #implementer="ngModel" required>
                <div [hidden]="implementer.valid" class="alert alert-danger">
                  Implementer Name is required
                </div>
              </div>

              <button [class.disable]="isProjectImplementerBtnDisabled" class="btn btn-lg btn-info btn-block text-uppercase"
                type="submit">Save Implementer</button>
            </form>

          </div>
        </div>

        <div class="card card-signin">
          <div class="card-body iati-box">
            <h6 class="card-title text-center">Project Implementers</h6>
            <table class="table table-bordered">
              <tr>
                <th>Implementer</th>
                <th>Action</th>
              </tr>
              <tr *ngFor="let implementer of currentProjectImplementersList">
                <td>{{implementer.implementer}}</td>
                <td>
                  <button id="dimplementer-{{activeProjectId}}-{{implementer.implementerId}}" (click)="deleteProjectImplementer($event)"
                    class="btn btn-danger btn-sm">
                    <i id="iimplementer-{{activeProjectId}}-{{implementer.implementerId}}" class="fa fa-trash"></i>
                  </button>
                </td>
              </tr>
            </table>
          </div>
        </div>

      </div>

    </div>
    <!--End of data entry tab-->
    <!--End of Implementers Tab-->

    <!--Disbursements tab for projects-->
    <div *ngIf="currentTab == 'sector'" class="row">

      <div class="col-md-6 col-sm-6">

        <div class="col-md-12">
          <div class="card card-signin my-5">
            <div class="card-body">
              <h5 class="card-title text-center">Disbursements List</h5>
              <table class="table table-bordered">
                <tr *ngFor="let project of aimsProjects">
                  <td>
                    <b>Project Title: </b>{{project.title | truncate}} <a href="#" title="View Project Details" id="aproject-{{project.id}}"
                        (click)="viewAIMSProject($event)" class="text-info">View Details</a><br />
                      <span class="badge badge-warning">AIMS</span>
                    <table *ngIf="project.disburements.length > 0" class="table table-bordered">
                      <tr>
                        <th>Starting Month/Year</th>
                        <th>Ending Month/Year</th>
                        <th>Percentage</th>
                        <th>Action</th>
                      </tr>
                      <tr *ngFor="let disbursement of project.disbursements">
                        <td>
                          {{disbursement.startingYear}} / {{disburements.startingMonth}}
                        </td>
                        <td>
                          {{disbursement.startingYear}} / {{disburements.startingMonth}}
                        </td>
                        <td>
                          {{disbursement.percentage}}
                        </td>
                        <td>
                          <button id="adisbursement-{{disbursement.id}}" (click)="enterAIMSDisbursement($event)" class="btn btn-success btn-sm">Enter >></button>
                        </td>
                      </tr>
                    </table>
                    <div class="text-info" *ngIf="project.sectors.length == 0"><i>No sectors available</i></div>
                  </td>
                </tr>
              </table>

              <table *ngIf="iatiProjects.length > 0" class="table table-bordered">
                <tr *ngFor="let project of iatiProjects">
                  <td>
                    <b>Project Title: </b>{{project.title | truncate}} <a href="#" title="View Project Details" id="iproject-{{project.id}}"
                        (click)="viewIATIProject($event)" class="text-info">View Details</a><br />
                      <span class="badge badge-warning">IATI</span>
                    <table  class="table table-bordered">
                    </table>
              </table>

            </div>
          </div>
        </div>

      </div>

      <!--Selected Sectors List-->
      <div class="col-md-6 col-sm-6">

        <div class="card card-signin my-5">
          <div class="card-body">
            <h5 class="card-title text-center">Manage Disbursements</h5>
            <form class="form-signin" (ngSubmit)="saveProjectDisbursement()" #disbursementForm="ngForm">
              <div class="form-group">
                <label for="startingYear">Starting Year/Month</label>
                <select class="form-control" id="startingYear" [(ngModel)]="disbursementModel.startingYear" name="startingYear"
                  #startingYear="ngModel" required>
                  <option *ngFor="let year of yearsList" [value]="year">{{year}}</option>
                </select>
                <select class="form-control" id="startingMonth" [(ngModel)]="disbursementModel.startingMonth" name="startingMonth"
                  #startingMonth="ngModel" required>
                  <option *ngFor="let month of monthsList" [value]="month.value">{{month.key}}</option>
                </select>
                <div [hidden]="startingYear.valid" class="alert alert-danger">
                  Starting Year is required
                </div>
                <div [hidden]="startingMonth.valid" class="alert alert-danger">
                  Starting Month is required
                </div>
              </div>
  
              <div class="form-group">
                <label for="endingYear">Ending Year/Month</label>
                <select class="form-control" id="endingYear" [(ngModel)]="disbursementModel.endingYear" name="endingYear" #endingYear="ngModel"
                  required>
                  <option *ngFor="let year of endingYearsList" [value]="year">{{year}}</option>
                </select>
                <select class="form-control" id="endingMonth" [(ngModel)]="disbursementModel.endingMonth" name="endingMonth" #endingMonth="ngModel"
                  required>
                  <option *ngFor="let month of monthsList" [value]="month.value">{{month.key}}</option>
                </select>
              
                <div [hidden]="endingYear.valid" class="alert alert-danger">
                  Ending Year is required
                </div>
                <div [hidden]="endingMonth.valid" class="alert alert-danger">
                  Ending Month is required
                </div>
              </div>
              
              <div class="form-group">
                <label for="text"> </label>
                <input type="number" class="form-control" id="percentage" [(ngModel)]="disbursementModel.percentage" name="percentage"
                  #percentage="ngModel" required>
                <div [hidden]="percentage.valid" class="alert alert-danger">
                  Fund percentage is required
                </div>
              </div>
          
              <button [class.disable]="isBtnDisabled" class="btn btn-lg btn-info btn-block text-uppercase" type="submit">{{btnText}}</button>
            </form>

          </div>
        </div>

        <div class="card card-signin">
          <div class="card-body iati-box">
            <h5 class="card-title text-center">Project Sectors</h5>
            <table class="table table-bordered">
              <tr>
                <th>Sector</th>
                <th>Fund %</th>
                <th>Action</th>
              </tr>
              <tr *ngFor="let sector of currentProjectSectorsList">
                <td>{{sector.sector}}</td>
                <td>{{sector.fundsPercentage}}</td>
                <td>
                  <button id="dsec-{{activeProjectId}}-{{sector.sectorId}}" (click)="deleteProjectSector($event)" class="btn btn-danger btn-sm">
                    <i id="idsec-{{activeProjectId}}-{{sector.sectorId}}" class="fa fa-trash"></i>
                  </button>
                </td>
              </tr>
            </table>
          </div>
        </div>

      </div>

    </div>
    <!--End of data entry tab-->
    <!--End of Sectors Tab-->

  </block-ui>

</div>

<info-modal message="{{infoMessage}}"></info-modal>
<error-modal message="{{errorMessage}}"></error-modal>

<project-info-modal [project]="viewProject" [locations]="viewProjectLocations" [sectors]="viewProjectSectors" [funders]="viewProjectFunders"
  [implementers]="viewProjectImplementers" [documents]="viewProjectDocuments">
</project-info-modal>

<projecti-info-modal [project]="viewProject" [locations]="viewProjectLocations" [sectors]="viewProjectSectors"
  [participatingOrganizations]="viewParticipatingOrganizations" [documents]="viewProjectDocuments">
</projecti-info-modal>