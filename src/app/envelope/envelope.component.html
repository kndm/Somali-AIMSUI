<div class="container-fluid view-area">
  <block-ui>
    <div class="row">
      <div class="col-md-12">
        <ul class="nav nav-tabs">
          <li class="nav-item">
            <a class="nav-link active btn-info" data-toggle="tab">Envelope data</a>
          </li>
        </ul>
      </div>

      <div *ngIf="isError" class="col-md-12 margin-top-10">
        <div class="alert alert-danger alert-dismissible">
          <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
          <strong>Error!</strong> {{errorMessage}}
        </div>
      </div>

      <div class="col-md-3 margin-top-20">
        <div class="card">
          <div class="card-header bg-info text-white">Guide</div>
          <div class="card-body">
            This section will include help on evelope data feature. This section will include help on evelope data
            feature.
            This section will include help on evelope data feature. This section will include help on evelope data
            feature.
          </div>
        </div>
      </div>
      <div class="col-sm-12 col-md-9 col-lg-9">
        <div class="card card-signin my-5 margin-top-20">
          <div class="card-body margin-top-0">
            <h5 class="card-title text-center">Envelope data</h5>

            <form class="form-signin" (ngSubmit)="envelopeForm.form.valid && saveEnvelopeData()" #envelopeForm="ngForm">
              <div class="row">
                <div class="col-md-4">
                  <span class="float-left">
                    <table>
                      <tr>
                        <td><b>Currency:</b>&nbsp;</td>
                        <td>
                          <select class="form-control" id="currency" [(ngModel)]="selectedCurrency" name="currency"
                            #currency="ngModel" (change)="convertExRatesToCurrency()">
                            <option value="null">--Select one--</option>
                            <option *ngFor="let currency of currenciesList" [value]="currency.currency">
                              {{currency.currency}}</option>
                          </select>
                        </td>
                      </tr>
                    </table>
                  </span>
                </div>
                <div class="col-md-4">
                  <span class="float-left">
                    <b>Default Currency:</b>&nbsp;{{defaultCurrency}}
                  </span>
                </div>
                <div class="col-md-4">
                  <span class="float-right">
                    <b>Actual Total:</b>&nbsp;{{totalFundingAmount}}
                  </span>
                </div>
              </div>
              <div class="row margin-top-10">
                <table *ngIf="envelopeBreakups.length > 0" class="table table-bordered">
                  <tr>
                    <th>Sectors</th>
                    <th *ngFor="let year of yearsList">{{year}}</th>
                  </tr>
                  <tr>
                    <td><i>Actual / Expected</i></td>
                    <td *ngFor="let e of envelopeBreakups">
                      <input type="text" id="a-{{e.year}}" (change)="updateEnvelpeActualValue($event)" value="{{e.actualAmount}}" />&nbsp;
                      <input type="text" id="ex-{{e.year}}" (change)="updateEnvelpeExpectedValue($event)" value="{{e.expectedAmount}}" />
                    </td>
                  </tr>
                  <tr *ngFor="let s of envelopeData.sectors">
                    <td>{{s.sector}}</td>
                    <td *ngFor="let allocation of s.yearlyAllocation">
                      <input type="text" id="i-{{allocation.year}}" readonly="readonly" value="{{allocation.amount}}" />
                    </td>
                  </tr>
                  <tr>
                    <td><b>Sector totals</b></td>
                    <td *ngFor="let year of yearsList">
                      {{getSectorTotalForYear(year)}}
                    </td>
                  </tr>
                </table>
              </div>

              <button [class.disable]="isBtnDisabled" class="btn btn-lg btn-info btn-block text-uppercase"
                type="submit">{{btnText}}</button>
            </form>
          </div>
        </div>
      </div>
    </div>
  </block-ui>
</div>